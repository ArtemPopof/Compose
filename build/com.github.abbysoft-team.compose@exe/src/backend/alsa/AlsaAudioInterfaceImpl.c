/* AlsaAudioInterfaceImpl.c generated by valac 0.40.25, the Vala compiler
 * generated from AlsaAudioInterfaceImpl.vala, do not modify */



#include <glib.h>
#include <glib-object.h>
#include <alsa/asoundlib.h>
#include <stdio.h>
#include <stdlib.h>
#include <string.h>
#include <errno.h>


#define TYPE_AUDIO_INTERFACE (audio_interface_get_type ())
#define AUDIO_INTERFACE(obj) (G_TYPE_CHECK_INSTANCE_CAST ((obj), TYPE_AUDIO_INTERFACE, AudioInterface))
#define IS_AUDIO_INTERFACE(obj) (G_TYPE_CHECK_INSTANCE_TYPE ((obj), TYPE_AUDIO_INTERFACE))
#define AUDIO_INTERFACE_GET_INTERFACE(obj) (G_TYPE_INSTANCE_GET_INTERFACE ((obj), TYPE_AUDIO_INTERFACE, AudioInterfaceIface))

typedef struct _AudioInterface AudioInterface;
typedef struct _AudioInterfaceIface AudioInterfaceIface;

#define TYPE_AUDIO_DATA (audio_data_get_type ())
#define AUDIO_DATA(obj) (G_TYPE_CHECK_INSTANCE_CAST ((obj), TYPE_AUDIO_DATA, AudioData))
#define AUDIO_DATA_CLASS(klass) (G_TYPE_CHECK_CLASS_CAST ((klass), TYPE_AUDIO_DATA, AudioDataClass))
#define IS_AUDIO_DATA(obj) (G_TYPE_CHECK_INSTANCE_TYPE ((obj), TYPE_AUDIO_DATA))
#define IS_AUDIO_DATA_CLASS(klass) (G_TYPE_CHECK_CLASS_TYPE ((klass), TYPE_AUDIO_DATA))
#define AUDIO_DATA_GET_CLASS(obj) (G_TYPE_INSTANCE_GET_CLASS ((obj), TYPE_AUDIO_DATA, AudioDataClass))

typedef struct _AudioData AudioData;
typedef struct _AudioDataClass AudioDataClass;

#define TYPE_ALSA_AUDIO_INTERFACE_IMPL (alsa_audio_interface_impl_get_type ())
#define ALSA_AUDIO_INTERFACE_IMPL(obj) (G_TYPE_CHECK_INSTANCE_CAST ((obj), TYPE_ALSA_AUDIO_INTERFACE_IMPL, AlsaAudioInterfaceImpl))
#define ALSA_AUDIO_INTERFACE_IMPL_CLASS(klass) (G_TYPE_CHECK_CLASS_CAST ((klass), TYPE_ALSA_AUDIO_INTERFACE_IMPL, AlsaAudioInterfaceImplClass))
#define IS_ALSA_AUDIO_INTERFACE_IMPL(obj) (G_TYPE_CHECK_INSTANCE_TYPE ((obj), TYPE_ALSA_AUDIO_INTERFACE_IMPL))
#define IS_ALSA_AUDIO_INTERFACE_IMPL_CLASS(klass) (G_TYPE_CHECK_CLASS_TYPE ((klass), TYPE_ALSA_AUDIO_INTERFACE_IMPL))
#define ALSA_AUDIO_INTERFACE_IMPL_GET_CLASS(obj) (G_TYPE_INSTANCE_GET_CLASS ((obj), TYPE_ALSA_AUDIO_INTERFACE_IMPL, AlsaAudioInterfaceImplClass))

typedef struct _AlsaAudioInterfaceImpl AlsaAudioInterfaceImpl;
typedef struct _AlsaAudioInterfaceImplClass AlsaAudioInterfaceImplClass;
typedef struct _AlsaAudioInterfaceImplPrivate AlsaAudioInterfaceImplPrivate;
enum  {
	ALSA_AUDIO_INTERFACE_IMPL_0_PROPERTY,
	ALSA_AUDIO_INTERFACE_IMPL_NUM_PROPERTIES
};
static GParamSpec* alsa_audio_interface_impl_properties[ALSA_AUDIO_INTERFACE_IMPL_NUM_PROPERTIES];
#define _0(var) ((var == NULL) ? NULL : (var = ( (var), NULL)))
#define _g_free0(var) (var = (g_free (var), NULL))

struct _AudioInterfaceIface {
	GTypeInterface parent_iface;
	gint (*init) (AudioInterface* self);
	void (*play) (AudioInterface* self, AudioData* clip, gboolean looped);
	void (*stop) (AudioInterface* self, AudioData* clip);
	void (*record) (AudioInterface* self);
	AudioData* (*stop_record) (AudioInterface* self);
	void (*close) (AudioInterface* self);
};

struct _AlsaAudioInterfaceImpl {
	GObject parent_instance;
	AlsaAudioInterfaceImplPrivate * priv;
};

struct _AlsaAudioInterfaceImplClass {
	GObjectClass parent_class;
};

struct _AlsaAudioInterfaceImplPrivate {
	snd_pcm_t* device;
	snd_pcm_hw_params_t* hardwareParams;
	snd_pcm_sw_params_t* softwareParams;
	guint8 buf[4096];
};


static gpointer alsa_audio_interface_impl_parent_class = NULL;
static AudioInterfaceIface * alsa_audio_interface_impl_audio_interface_parent_iface = NULL;

GType audio_data_get_type (void) G_GNUC_CONST;
GType audio_interface_get_type (void) G_GNUC_CONST;
GType alsa_audio_interface_impl_get_type (void) G_GNUC_CONST;
#define ALSA_AUDIO_INTERFACE_IMPL_GET_PRIVATE(o) (G_TYPE_INSTANCE_GET_PRIVATE ((o), TYPE_ALSA_AUDIO_INTERFACE_IMPL, AlsaAudioInterfaceImplPrivate))
static gint alsa_audio_interface_impl_real_init (AudioInterface* base);
static gboolean alsa_audio_interface_impl_configure_playback_params (AlsaAudioInterfaceImpl* self);
static void alsa_audio_interface_impl_start_audio_thread (AlsaAudioInterfaceImpl* self);
static gint alsa_audio_interface_impl_audio_func (AlsaAudioInterfaceImpl* self);
static gpointer _alsa_audio_interface_impl_audio_func_gthread_func (gpointer self);
static snd_pcm_sframes_t alsa_audio_interface_impl_playback_callback (AlsaAudioInterfaceImpl* self,
                                                               snd_pcm_uframes_t frameCount);
static void alsa_audio_interface_impl_real_play (AudioInterface* base,
                                          AudioData* clip,
                                          gboolean looped);
static void alsa_audio_interface_impl_real_stop (AudioInterface* base,
                                          AudioData* clip);
static void alsa_audio_interface_impl_real_record (AudioInterface* base);
static void alsa_audio_interface_impl_real_close (AudioInterface* base);
static AudioData* alsa_audio_interface_impl_real_stop_record (AudioInterface* base);
AudioData* audio_data_new (void);
AudioData* audio_data_construct (GType object_type);
AlsaAudioInterfaceImpl* alsa_audio_interface_impl_new (void);
AlsaAudioInterfaceImpl* alsa_audio_interface_impl_construct (GType object_type);
gint audio_interface_init (AudioInterface* self);
void audio_interface_play (AudioInterface* self,
                           AudioData* clip,
                           gboolean looped);
void audio_interface_stop (AudioInterface* self,
                           AudioData* clip);
void audio_interface_record (AudioInterface* self);
void audio_interface_close (AudioInterface* self);
AudioData* audio_interface_stop_record (AudioInterface* self);
static void alsa_audio_interface_impl_finalize (GObject * obj);


static gint
alsa_audio_interface_impl_real_init (AudioInterface* base)
{
	AlsaAudioInterfaceImpl * self;
	gint result = 0;
	FILE* _tmp0_;
	FILE* _tmp1_;
	gint errorCode = 0;
	snd_pcm_t* _tmp2_ = NULL;
	gint _tmp3_;
	gint _tmp4_;
	FILE* _tmp12_;
	snd_pcm_t* _tmp13_;
	snd_pcm_t* _tmp14_;
	gchar* _tmp15_;
	gchar* _tmp16_;
	FILE* _tmp17_;
	FILE* _tmp18_;
	snd_pcm_hw_params_t* _tmp19_ = NULL;
	gint _tmp20_;
	gint _tmp21_;
	FILE* _tmp23_;
	FILE* _tmp24_;
	snd_pcm_sw_params_t* _tmp25_ = NULL;
	gint _tmp26_;
	gint _tmp27_;
	snd_pcm_t* _tmp29_;
	snd_pcm_sw_params_t* _tmp30_;
	gint _tmp31_;
	snd_pcm_t* _tmp33_;
	snd_pcm_sw_params_t* _tmp34_;
	gint _tmp35_;
	snd_pcm_t* _tmp37_;
	snd_pcm_sw_params_t* _tmp38_;
	gint _tmp39_;
	snd_pcm_t* _tmp41_;
	snd_pcm_sw_params_t* _tmp42_;
	gint _tmp43_;
	FILE* _tmp45_;
	snd_pcm_t* _tmp46_;
	gint _tmp47_;
	FILE* _tmp49_;
	snd_pcm_sframes_t framesCount = {0};
#line 10 "/home/artem/Documents/ElementaryProjects/Compose/src/backend/alsa/AlsaAudioInterfaceImpl.vala"
	self = (AlsaAudioInterfaceImpl*) base;
#line 11 "/home/artem/Documents/ElementaryProjects/Compose/src/backend/alsa/AlsaAudioInterfaceImpl.vala"
	_tmp0_ = stdout;
#line 11 "/home/artem/Documents/ElementaryProjects/Compose/src/backend/alsa/AlsaAudioInterfaceImpl.vala"
	fprintf (_tmp0_, "Initializing alsa backend\n");
#line 13 "/home/artem/Documents/ElementaryProjects/Compose/src/backend/alsa/AlsaAudioInterfaceImpl.vala"
	_tmp1_ = stdout;
#line 13 "/home/artem/Documents/ElementaryProjects/Compose/src/backend/alsa/AlsaAudioInterfaceImpl.vala"
	fprintf (_tmp1_, "Setting up default device hw:0,0\n");
#line 14 "/home/artem/Documents/ElementaryProjects/Compose/src/backend/alsa/AlsaAudioInterfaceImpl.vala"
	_tmp3_ = snd_pcm_open (&_tmp2_, "hw:0,0", SND_PCM_STREAM_PLAYBACK, 0);
#line 14 "/home/artem/Documents/ElementaryProjects/Compose/src/backend/alsa/AlsaAudioInterfaceImpl.vala"
	_0 (self->priv->device);
#line 14 "/home/artem/Documents/ElementaryProjects/Compose/src/backend/alsa/AlsaAudioInterfaceImpl.vala"
	self->priv->device = _tmp2_;
#line 14 "/home/artem/Documents/ElementaryProjects/Compose/src/backend/alsa/AlsaAudioInterfaceImpl.vala"
	errorCode = _tmp3_;
#line 16 "/home/artem/Documents/ElementaryProjects/Compose/src/backend/alsa/AlsaAudioInterfaceImpl.vala"
	_tmp4_ = errorCode;
#line 16 "/home/artem/Documents/ElementaryProjects/Compose/src/backend/alsa/AlsaAudioInterfaceImpl.vala"
	if (_tmp4_ < 0) {
#line 182 "AlsaAudioInterfaceImpl.c"
		gchar* errorMessage = NULL;
		gint _tmp5_;
		const gchar* _tmp6_;
		gchar* _tmp7_;
		FILE* _tmp8_;
		const gchar* _tmp9_;
		gchar* _tmp10_;
		gchar* _tmp11_;
#line 17 "/home/artem/Documents/ElementaryProjects/Compose/src/backend/alsa/AlsaAudioInterfaceImpl.vala"
		_tmp5_ = errorCode;
#line 17 "/home/artem/Documents/ElementaryProjects/Compose/src/backend/alsa/AlsaAudioInterfaceImpl.vala"
		_tmp6_ = snd_strerror (_tmp5_);
#line 17 "/home/artem/Documents/ElementaryProjects/Compose/src/backend/alsa/AlsaAudioInterfaceImpl.vala"
		_tmp7_ = g_strdup (_tmp6_);
#line 17 "/home/artem/Documents/ElementaryProjects/Compose/src/backend/alsa/AlsaAudioInterfaceImpl.vala"
		errorMessage = _tmp7_;
#line 18 "/home/artem/Documents/ElementaryProjects/Compose/src/backend/alsa/AlsaAudioInterfaceImpl.vala"
		_tmp8_ = stdout;
#line 18 "/home/artem/Documents/ElementaryProjects/Compose/src/backend/alsa/AlsaAudioInterfaceImpl.vala"
		_tmp9_ = errorMessage;
#line 18 "/home/artem/Documents/ElementaryProjects/Compose/src/backend/alsa/AlsaAudioInterfaceImpl.vala"
		_tmp10_ = g_strconcat ("Initialization error: ", _tmp9_, NULL);
#line 18 "/home/artem/Documents/ElementaryProjects/Compose/src/backend/alsa/AlsaAudioInterfaceImpl.vala"
		_tmp11_ = _tmp10_;
#line 18 "/home/artem/Documents/ElementaryProjects/Compose/src/backend/alsa/AlsaAudioInterfaceImpl.vala"
		fprintf (_tmp8_, "%s", _tmp11_);
#line 18 "/home/artem/Documents/ElementaryProjects/Compose/src/backend/alsa/AlsaAudioInterfaceImpl.vala"
		_g_free0 (_tmp11_);
#line 19 "/home/artem/Documents/ElementaryProjects/Compose/src/backend/alsa/AlsaAudioInterfaceImpl.vala"
		result = 1;
#line 19 "/home/artem/Documents/ElementaryProjects/Compose/src/backend/alsa/AlsaAudioInterfaceImpl.vala"
		_g_free0 (errorMessage);
#line 19 "/home/artem/Documents/ElementaryProjects/Compose/src/backend/alsa/AlsaAudioInterfaceImpl.vala"
		return result;
#line 217 "AlsaAudioInterfaceImpl.c"
	}
#line 22 "/home/artem/Documents/ElementaryProjects/Compose/src/backend/alsa/AlsaAudioInterfaceImpl.vala"
	_tmp12_ = stdout;
#line 22 "/home/artem/Documents/ElementaryProjects/Compose/src/backend/alsa/AlsaAudioInterfaceImpl.vala"
	_tmp13_ = self->priv->device;
#line 22 "/home/artem/Documents/ElementaryProjects/Compose/src/backend/alsa/AlsaAudioInterfaceImpl.vala"
	_tmp14_ = self->priv->device;
#line 22 "/home/artem/Documents/ElementaryProjects/Compose/src/backend/alsa/AlsaAudioInterfaceImpl.vala"
	_tmp15_ = snd_pcm_name (_tmp14_);
#line 22 "/home/artem/Documents/ElementaryProjects/Compose/src/backend/alsa/AlsaAudioInterfaceImpl.vala"
	_tmp16_ = _tmp15_;
#line 22 "/home/artem/Documents/ElementaryProjects/Compose/src/backend/alsa/AlsaAudioInterfaceImpl.vala"
	fprintf (_tmp12_, "Device opened, type=%d, name=%s\n", (gint) snd_pcm_type (_tmp13_), _tmp16_);
#line 22 "/home/artem/Documents/ElementaryProjects/Compose/src/backend/alsa/AlsaAudioInterfaceImpl.vala"
	_g_free0 (_tmp16_);
#line 24 "/home/artem/Documents/ElementaryProjects/Compose/src/backend/alsa/AlsaAudioInterfaceImpl.vala"
	_tmp17_ = stdout;
#line 24 "/home/artem/Documents/ElementaryProjects/Compose/src/backend/alsa/AlsaAudioInterfaceImpl.vala"
	fprintf (_tmp17_, "Getting device info\n");
#line 26 "/home/artem/Documents/ElementaryProjects/Compose/src/backend/alsa/AlsaAudioInterfaceImpl.vala"
	_tmp18_ = stdout;
#line 26 "/home/artem/Documents/ElementaryProjects/Compose/src/backend/alsa/AlsaAudioInterfaceImpl.vala"
	fprintf (_tmp18_, "Malloc for hardwareParams\n");
#line 28 "/home/artem/Documents/ElementaryProjects/Compose/src/backend/alsa/AlsaAudioInterfaceImpl.vala"
	_tmp20_ = snd_pcm_hw_params_malloc (&_tmp19_);
#line 28 "/home/artem/Documents/ElementaryProjects/Compose/src/backend/alsa/AlsaAudioInterfaceImpl.vala"
	self->priv->hardwareParams = _tmp19_;
#line 28 "/home/artem/Documents/ElementaryProjects/Compose/src/backend/alsa/AlsaAudioInterfaceImpl.vala"
	errorCode = _tmp20_;
#line 29 "/home/artem/Documents/ElementaryProjects/Compose/src/backend/alsa/AlsaAudioInterfaceImpl.vala"
	_tmp21_ = errorCode;
#line 29 "/home/artem/Documents/ElementaryProjects/Compose/src/backend/alsa/AlsaAudioInterfaceImpl.vala"
	if (_tmp21_ < 0) {
#line 251 "AlsaAudioInterfaceImpl.c"
		FILE* _tmp22_;
#line 30 "/home/artem/Documents/ElementaryProjects/Compose/src/backend/alsa/AlsaAudioInterfaceImpl.vala"
		_tmp22_ = stdout;
#line 30 "/home/artem/Documents/ElementaryProjects/Compose/src/backend/alsa/AlsaAudioInterfaceImpl.vala"
		fprintf (_tmp22_, "Failed to allocate hardware params structure\n");
#line 31 "/home/artem/Documents/ElementaryProjects/Compose/src/backend/alsa/AlsaAudioInterfaceImpl.vala"
		result = 1;
#line 31 "/home/artem/Documents/ElementaryProjects/Compose/src/backend/alsa/AlsaAudioInterfaceImpl.vala"
		return result;
#line 261 "AlsaAudioInterfaceImpl.c"
	}
#line 34 "/home/artem/Documents/ElementaryProjects/Compose/src/backend/alsa/AlsaAudioInterfaceImpl.vala"
	_tmp23_ = stdout;
#line 34 "/home/artem/Documents/ElementaryProjects/Compose/src/backend/alsa/AlsaAudioInterfaceImpl.vala"
	fprintf (_tmp23_, "Configure hardware params");
#line 36 "/home/artem/Documents/ElementaryProjects/Compose/src/backend/alsa/AlsaAudioInterfaceImpl.vala"
	if (!alsa_audio_interface_impl_configure_playback_params (self)) {
#line 37 "/home/artem/Documents/ElementaryProjects/Compose/src/backend/alsa/AlsaAudioInterfaceImpl.vala"
		result = 1;
#line 37 "/home/artem/Documents/ElementaryProjects/Compose/src/backend/alsa/AlsaAudioInterfaceImpl.vala"
		return result;
#line 273 "AlsaAudioInterfaceImpl.c"
	}
#line 40 "/home/artem/Documents/ElementaryProjects/Compose/src/backend/alsa/AlsaAudioInterfaceImpl.vala"
	_tmp24_ = stdout;
#line 40 "/home/artem/Documents/ElementaryProjects/Compose/src/backend/alsa/AlsaAudioInterfaceImpl.vala"
	fprintf (_tmp24_, "Configure software parameters\n");
#line 41 "/home/artem/Documents/ElementaryProjects/Compose/src/backend/alsa/AlsaAudioInterfaceImpl.vala"
	_tmp26_ = snd_pcm_sw_params_malloc (&_tmp25_);
#line 41 "/home/artem/Documents/ElementaryProjects/Compose/src/backend/alsa/AlsaAudioInterfaceImpl.vala"
	self->priv->softwareParams = _tmp25_;
#line 41 "/home/artem/Documents/ElementaryProjects/Compose/src/backend/alsa/AlsaAudioInterfaceImpl.vala"
	errorCode = _tmp26_;
#line 42 "/home/artem/Documents/ElementaryProjects/Compose/src/backend/alsa/AlsaAudioInterfaceImpl.vala"
	_tmp27_ = errorCode;
#line 42 "/home/artem/Documents/ElementaryProjects/Compose/src/backend/alsa/AlsaAudioInterfaceImpl.vala"
	if (_tmp27_ < 0) {
#line 289 "AlsaAudioInterfaceImpl.c"
		FILE* _tmp28_;
#line 43 "/home/artem/Documents/ElementaryProjects/Compose/src/backend/alsa/AlsaAudioInterfaceImpl.vala"
		_tmp28_ = stdout;
#line 43 "/home/artem/Documents/ElementaryProjects/Compose/src/backend/alsa/AlsaAudioInterfaceImpl.vala"
		fprintf (_tmp28_, "Can't malloc software parameters");
#line 44 "/home/artem/Documents/ElementaryProjects/Compose/src/backend/alsa/AlsaAudioInterfaceImpl.vala"
		result = 1;
#line 44 "/home/artem/Documents/ElementaryProjects/Compose/src/backend/alsa/AlsaAudioInterfaceImpl.vala"
		return result;
#line 299 "AlsaAudioInterfaceImpl.c"
	}
#line 47 "/home/artem/Documents/ElementaryProjects/Compose/src/backend/alsa/AlsaAudioInterfaceImpl.vala"
	_tmp29_ = self->priv->device;
#line 47 "/home/artem/Documents/ElementaryProjects/Compose/src/backend/alsa/AlsaAudioInterfaceImpl.vala"
	_tmp30_ = self->priv->softwareParams;
#line 47 "/home/artem/Documents/ElementaryProjects/Compose/src/backend/alsa/AlsaAudioInterfaceImpl.vala"
	errorCode = snd_pcm_sw_params_current (_tmp29_, _tmp30_);
#line 48 "/home/artem/Documents/ElementaryProjects/Compose/src/backend/alsa/AlsaAudioInterfaceImpl.vala"
	_tmp31_ = errorCode;
#line 48 "/home/artem/Documents/ElementaryProjects/Compose/src/backend/alsa/AlsaAudioInterfaceImpl.vala"
	if (_tmp31_ < 0) {
#line 311 "AlsaAudioInterfaceImpl.c"
		FILE* _tmp32_;
#line 49 "/home/artem/Documents/ElementaryProjects/Compose/src/backend/alsa/AlsaAudioInterfaceImpl.vala"
		_tmp32_ = stdout;
#line 49 "/home/artem/Documents/ElementaryProjects/Compose/src/backend/alsa/AlsaAudioInterfaceImpl.vala"
		fprintf (_tmp32_, "Can't get software parameters");
#line 50 "/home/artem/Documents/ElementaryProjects/Compose/src/backend/alsa/AlsaAudioInterfaceImpl.vala"
		result = 1;
#line 50 "/home/artem/Documents/ElementaryProjects/Compose/src/backend/alsa/AlsaAudioInterfaceImpl.vala"
		return result;
#line 321 "AlsaAudioInterfaceImpl.c"
	}
#line 53 "/home/artem/Documents/ElementaryProjects/Compose/src/backend/alsa/AlsaAudioInterfaceImpl.vala"
	_tmp33_ = self->priv->device;
#line 53 "/home/artem/Documents/ElementaryProjects/Compose/src/backend/alsa/AlsaAudioInterfaceImpl.vala"
	_tmp34_ = self->priv->softwareParams;
#line 53 "/home/artem/Documents/ElementaryProjects/Compose/src/backend/alsa/AlsaAudioInterfaceImpl.vala"
	errorCode = snd_pcm_sw_params_set_avail_min (_tmp33_, _tmp34_, 4096);
#line 54 "/home/artem/Documents/ElementaryProjects/Compose/src/backend/alsa/AlsaAudioInterfaceImpl.vala"
	_tmp35_ = errorCode;
#line 54 "/home/artem/Documents/ElementaryProjects/Compose/src/backend/alsa/AlsaAudioInterfaceImpl.vala"
	if (_tmp35_ < 0) {
#line 333 "AlsaAudioInterfaceImpl.c"
		FILE* _tmp36_;
#line 55 "/home/artem/Documents/ElementaryProjects/Compose/src/backend/alsa/AlsaAudioInterfaceImpl.vala"
		_tmp36_ = stdout;
#line 55 "/home/artem/Documents/ElementaryProjects/Compose/src/backend/alsa/AlsaAudioInterfaceImpl.vala"
		fprintf (_tmp36_, "Can't set min avail software parameter");
#line 56 "/home/artem/Documents/ElementaryProjects/Compose/src/backend/alsa/AlsaAudioInterfaceImpl.vala"
		result = 1;
#line 56 "/home/artem/Documents/ElementaryProjects/Compose/src/backend/alsa/AlsaAudioInterfaceImpl.vala"
		return result;
#line 343 "AlsaAudioInterfaceImpl.c"
	}
#line 59 "/home/artem/Documents/ElementaryProjects/Compose/src/backend/alsa/AlsaAudioInterfaceImpl.vala"
	_tmp37_ = self->priv->device;
#line 59 "/home/artem/Documents/ElementaryProjects/Compose/src/backend/alsa/AlsaAudioInterfaceImpl.vala"
	_tmp38_ = self->priv->softwareParams;
#line 59 "/home/artem/Documents/ElementaryProjects/Compose/src/backend/alsa/AlsaAudioInterfaceImpl.vala"
	errorCode = snd_pcm_sw_params_set_start_threshold (_tmp37_, _tmp38_, (snd_pcm_uframes_t) 0U);
#line 60 "/home/artem/Documents/ElementaryProjects/Compose/src/backend/alsa/AlsaAudioInterfaceImpl.vala"
	_tmp39_ = errorCode;
#line 60 "/home/artem/Documents/ElementaryProjects/Compose/src/backend/alsa/AlsaAudioInterfaceImpl.vala"
	if (_tmp39_ < 0) {
#line 355 "AlsaAudioInterfaceImpl.c"
		FILE* _tmp40_;
#line 61 "/home/artem/Documents/ElementaryProjects/Compose/src/backend/alsa/AlsaAudioInterfaceImpl.vala"
		_tmp40_ = stdout;
#line 61 "/home/artem/Documents/ElementaryProjects/Compose/src/backend/alsa/AlsaAudioInterfaceImpl.vala"
		fprintf (_tmp40_, "Can't start threshold software parameter");
#line 62 "/home/artem/Documents/ElementaryProjects/Compose/src/backend/alsa/AlsaAudioInterfaceImpl.vala"
		result = 1;
#line 62 "/home/artem/Documents/ElementaryProjects/Compose/src/backend/alsa/AlsaAudioInterfaceImpl.vala"
		return result;
#line 365 "AlsaAudioInterfaceImpl.c"
	}
#line 65 "/home/artem/Documents/ElementaryProjects/Compose/src/backend/alsa/AlsaAudioInterfaceImpl.vala"
	_tmp41_ = self->priv->device;
#line 65 "/home/artem/Documents/ElementaryProjects/Compose/src/backend/alsa/AlsaAudioInterfaceImpl.vala"
	_tmp42_ = self->priv->softwareParams;
#line 65 "/home/artem/Documents/ElementaryProjects/Compose/src/backend/alsa/AlsaAudioInterfaceImpl.vala"
	errorCode = snd_pcm_sw_params (_tmp41_, _tmp42_);
#line 66 "/home/artem/Documents/ElementaryProjects/Compose/src/backend/alsa/AlsaAudioInterfaceImpl.vala"
	_tmp43_ = errorCode;
#line 66 "/home/artem/Documents/ElementaryProjects/Compose/src/backend/alsa/AlsaAudioInterfaceImpl.vala"
	if (_tmp43_ < 0) {
#line 377 "AlsaAudioInterfaceImpl.c"
		FILE* _tmp44_;
#line 67 "/home/artem/Documents/ElementaryProjects/Compose/src/backend/alsa/AlsaAudioInterfaceImpl.vala"
		_tmp44_ = stdout;
#line 67 "/home/artem/Documents/ElementaryProjects/Compose/src/backend/alsa/AlsaAudioInterfaceImpl.vala"
		fprintf (_tmp44_, "Can't set software parameters");
#line 68 "/home/artem/Documents/ElementaryProjects/Compose/src/backend/alsa/AlsaAudioInterfaceImpl.vala"
		result = 1;
#line 68 "/home/artem/Documents/ElementaryProjects/Compose/src/backend/alsa/AlsaAudioInterfaceImpl.vala"
		return result;
#line 387 "AlsaAudioInterfaceImpl.c"
	}
#line 71 "/home/artem/Documents/ElementaryProjects/Compose/src/backend/alsa/AlsaAudioInterfaceImpl.vala"
	_tmp45_ = stdout;
#line 71 "/home/artem/Documents/ElementaryProjects/Compose/src/backend/alsa/AlsaAudioInterfaceImpl.vala"
	fprintf (_tmp45_, "Prepare device to be used\n");
#line 72 "/home/artem/Documents/ElementaryProjects/Compose/src/backend/alsa/AlsaAudioInterfaceImpl.vala"
	_tmp46_ = self->priv->device;
#line 72 "/home/artem/Documents/ElementaryProjects/Compose/src/backend/alsa/AlsaAudioInterfaceImpl.vala"
	errorCode = snd_pcm_prepare (_tmp46_);
#line 73 "/home/artem/Documents/ElementaryProjects/Compose/src/backend/alsa/AlsaAudioInterfaceImpl.vala"
	_tmp47_ = errorCode;
#line 73 "/home/artem/Documents/ElementaryProjects/Compose/src/backend/alsa/AlsaAudioInterfaceImpl.vala"
	if (_tmp47_ < 0) {
#line 401 "AlsaAudioInterfaceImpl.c"
		FILE* _tmp48_;
#line 74 "/home/artem/Documents/ElementaryProjects/Compose/src/backend/alsa/AlsaAudioInterfaceImpl.vala"
		_tmp48_ = stdout;
#line 74 "/home/artem/Documents/ElementaryProjects/Compose/src/backend/alsa/AlsaAudioInterfaceImpl.vala"
		fprintf (_tmp48_, "Failed to prepare device");
#line 75 "/home/artem/Documents/ElementaryProjects/Compose/src/backend/alsa/AlsaAudioInterfaceImpl.vala"
		result = 1;
#line 75 "/home/artem/Documents/ElementaryProjects/Compose/src/backend/alsa/AlsaAudioInterfaceImpl.vala"
		return result;
#line 411 "AlsaAudioInterfaceImpl.c"
	}
#line 78 "/home/artem/Documents/ElementaryProjects/Compose/src/backend/alsa/AlsaAudioInterfaceImpl.vala"
	_tmp49_ = stdout;
#line 78 "/home/artem/Documents/ElementaryProjects/Compose/src/backend/alsa/AlsaAudioInterfaceImpl.vala"
	fprintf (_tmp49_, "Write data to device\n");
#line 417 "AlsaAudioInterfaceImpl.c"
	{
		gint i = 0;
#line 81 "/home/artem/Documents/ElementaryProjects/Compose/src/backend/alsa/AlsaAudioInterfaceImpl.vala"
		i = 0;
#line 422 "AlsaAudioInterfaceImpl.c"
		{
			gboolean _tmp50_ = FALSE;
#line 81 "/home/artem/Documents/ElementaryProjects/Compose/src/backend/alsa/AlsaAudioInterfaceImpl.vala"
			_tmp50_ = TRUE;
#line 81 "/home/artem/Documents/ElementaryProjects/Compose/src/backend/alsa/AlsaAudioInterfaceImpl.vala"
			while (TRUE) {
#line 429 "AlsaAudioInterfaceImpl.c"
				gint _tmp52_;
				snd_pcm_t* _tmp53_;
				snd_pcm_sframes_t _tmp54_;
#line 81 "/home/artem/Documents/ElementaryProjects/Compose/src/backend/alsa/AlsaAudioInterfaceImpl.vala"
				if (!_tmp50_) {
#line 435 "AlsaAudioInterfaceImpl.c"
					gint _tmp51_;
#line 81 "/home/artem/Documents/ElementaryProjects/Compose/src/backend/alsa/AlsaAudioInterfaceImpl.vala"
					i = i + 1;
#line 81 "/home/artem/Documents/ElementaryProjects/Compose/src/backend/alsa/AlsaAudioInterfaceImpl.vala"
					_tmp51_ = i;
#line 441 "AlsaAudioInterfaceImpl.c"
				}
#line 81 "/home/artem/Documents/ElementaryProjects/Compose/src/backend/alsa/AlsaAudioInterfaceImpl.vala"
				_tmp50_ = FALSE;
#line 81 "/home/artem/Documents/ElementaryProjects/Compose/src/backend/alsa/AlsaAudioInterfaceImpl.vala"
				_tmp52_ = i;
#line 81 "/home/artem/Documents/ElementaryProjects/Compose/src/backend/alsa/AlsaAudioInterfaceImpl.vala"
				if (!(_tmp52_ < 22)) {
#line 81 "/home/artem/Documents/ElementaryProjects/Compose/src/backend/alsa/AlsaAudioInterfaceImpl.vala"
					break;
#line 451 "AlsaAudioInterfaceImpl.c"
				}
#line 82 "/home/artem/Documents/ElementaryProjects/Compose/src/backend/alsa/AlsaAudioInterfaceImpl.vala"
				_tmp53_ = self->priv->device;
#line 82 "/home/artem/Documents/ElementaryProjects/Compose/src/backend/alsa/AlsaAudioInterfaceImpl.vala"
				framesCount = snd_pcm_writei (_tmp53_, self->priv->buf, (snd_pcm_uframes_t) 128);
#line 83 "/home/artem/Documents/ElementaryProjects/Compose/src/backend/alsa/AlsaAudioInterfaceImpl.vala"
				_tmp54_ = framesCount;
#line 83 "/home/artem/Documents/ElementaryProjects/Compose/src/backend/alsa/AlsaAudioInterfaceImpl.vala"
				if (_tmp54_ != ((snd_pcm_sframes_t) 128)) {
#line 461 "AlsaAudioInterfaceImpl.c"
					FILE* _tmp55_;
#line 84 "/home/artem/Documents/ElementaryProjects/Compose/src/backend/alsa/AlsaAudioInterfaceImpl.vala"
					_tmp55_ = stdout;
#line 84 "/home/artem/Documents/ElementaryProjects/Compose/src/backend/alsa/AlsaAudioInterfaceImpl.vala"
					fprintf (_tmp55_, "Failed to write to device:");
#line 467 "AlsaAudioInterfaceImpl.c"
				}
			}
		}
	}
#line 89 "/home/artem/Documents/ElementaryProjects/Compose/src/backend/alsa/AlsaAudioInterfaceImpl.vala"
	alsa_audio_interface_impl_start_audio_thread (self);
#line 91 "/home/artem/Documents/ElementaryProjects/Compose/src/backend/alsa/AlsaAudioInterfaceImpl.vala"
	result = 0;
#line 91 "/home/artem/Documents/ElementaryProjects/Compose/src/backend/alsa/AlsaAudioInterfaceImpl.vala"
	return result;
#line 478 "AlsaAudioInterfaceImpl.c"
}


static gboolean
alsa_audio_interface_impl_configure_playback_params (AlsaAudioInterfaceImpl* self)
{
	gboolean result = FALSE;
	gint errorCode = 0;
	snd_pcm_t* _tmp0_;
	snd_pcm_hw_params_t* _tmp1_;
	gint _tmp2_;
	FILE* _tmp4_;
	snd_pcm_t* _tmp5_;
	snd_pcm_hw_params_t* _tmp6_;
	gint _tmp7_;
	FILE* _tmp9_;
	snd_pcm_t* _tmp10_;
	snd_pcm_hw_params_t* _tmp11_;
	gint _tmp12_;
	gint rate = 0;
	FILE* _tmp14_;
	snd_pcm_t* _tmp15_;
	snd_pcm_hw_params_t* _tmp16_;
	gint _tmp17_;
	gint _tmp18_;
	FILE* _tmp20_;
	snd_pcm_t* _tmp21_;
	snd_pcm_hw_params_t* _tmp22_;
	gint _tmp23_;
	snd_pcm_t* _tmp25_;
	snd_pcm_hw_params_t* _tmp26_;
	gint _tmp27_;
#line 94 "/home/artem/Documents/ElementaryProjects/Compose/src/backend/alsa/AlsaAudioInterfaceImpl.vala"
	g_return_val_if_fail (self != NULL, FALSE);
#line 97 "/home/artem/Documents/ElementaryProjects/Compose/src/backend/alsa/AlsaAudioInterfaceImpl.vala"
	_tmp0_ = self->priv->device;
#line 97 "/home/artem/Documents/ElementaryProjects/Compose/src/backend/alsa/AlsaAudioInterfaceImpl.vala"
	_tmp1_ = self->priv->hardwareParams;
#line 97 "/home/artem/Documents/ElementaryProjects/Compose/src/backend/alsa/AlsaAudioInterfaceImpl.vala"
	errorCode = snd_pcm_hw_params_any (_tmp0_, _tmp1_);
#line 98 "/home/artem/Documents/ElementaryProjects/Compose/src/backend/alsa/AlsaAudioInterfaceImpl.vala"
	_tmp2_ = errorCode;
#line 98 "/home/artem/Documents/ElementaryProjects/Compose/src/backend/alsa/AlsaAudioInterfaceImpl.vala"
	if (_tmp2_ < 0) {
#line 523 "AlsaAudioInterfaceImpl.c"
		FILE* _tmp3_;
#line 99 "/home/artem/Documents/ElementaryProjects/Compose/src/backend/alsa/AlsaAudioInterfaceImpl.vala"
		_tmp3_ = stdout;
#line 99 "/home/artem/Documents/ElementaryProjects/Compose/src/backend/alsa/AlsaAudioInterfaceImpl.vala"
		fprintf (_tmp3_, "Failed to get device params\n");
#line 100 "/home/artem/Documents/ElementaryProjects/Compose/src/backend/alsa/AlsaAudioInterfaceImpl.vala"
		result = FALSE;
#line 100 "/home/artem/Documents/ElementaryProjects/Compose/src/backend/alsa/AlsaAudioInterfaceImpl.vala"
		return result;
#line 533 "AlsaAudioInterfaceImpl.c"
	}
#line 103 "/home/artem/Documents/ElementaryProjects/Compose/src/backend/alsa/AlsaAudioInterfaceImpl.vala"
	_tmp4_ = stdout;
#line 103 "/home/artem/Documents/ElementaryProjects/Compose/src/backend/alsa/AlsaAudioInterfaceImpl.vala"
	fprintf (_tmp4_, "Configuring device for playback\n");
#line 104 "/home/artem/Documents/ElementaryProjects/Compose/src/backend/alsa/AlsaAudioInterfaceImpl.vala"
	_tmp5_ = self->priv->device;
#line 104 "/home/artem/Documents/ElementaryProjects/Compose/src/backend/alsa/AlsaAudioInterfaceImpl.vala"
	_tmp6_ = self->priv->hardwareParams;
#line 104 "/home/artem/Documents/ElementaryProjects/Compose/src/backend/alsa/AlsaAudioInterfaceImpl.vala"
	errorCode = snd_pcm_hw_params_set_access (_tmp5_, _tmp6_, SND_PCM_ACCESS_RW_INTERLEAVED);
#line 105 "/home/artem/Documents/ElementaryProjects/Compose/src/backend/alsa/AlsaAudioInterfaceImpl.vala"
	_tmp7_ = errorCode;
#line 105 "/home/artem/Documents/ElementaryProjects/Compose/src/backend/alsa/AlsaAudioInterfaceImpl.vala"
	if (_tmp7_ < 0) {
#line 549 "AlsaAudioInterfaceImpl.c"
		FILE* _tmp8_;
#line 106 "/home/artem/Documents/ElementaryProjects/Compose/src/backend/alsa/AlsaAudioInterfaceImpl.vala"
		_tmp8_ = stdout;
#line 106 "/home/artem/Documents/ElementaryProjects/Compose/src/backend/alsa/AlsaAudioInterfaceImpl.vala"
		fprintf (_tmp8_, "Failed to set interleaved access for the device\n");
#line 107 "/home/artem/Documents/ElementaryProjects/Compose/src/backend/alsa/AlsaAudioInterfaceImpl.vala"
		result = FALSE;
#line 107 "/home/artem/Documents/ElementaryProjects/Compose/src/backend/alsa/AlsaAudioInterfaceImpl.vala"
		return result;
#line 559 "AlsaAudioInterfaceImpl.c"
	}
#line 110 "/home/artem/Documents/ElementaryProjects/Compose/src/backend/alsa/AlsaAudioInterfaceImpl.vala"
	_tmp9_ = stdout;
#line 110 "/home/artem/Documents/ElementaryProjects/Compose/src/backend/alsa/AlsaAudioInterfaceImpl.vala"
	fprintf (_tmp9_, "Set format to s16_le\n");
#line 111 "/home/artem/Documents/ElementaryProjects/Compose/src/backend/alsa/AlsaAudioInterfaceImpl.vala"
	_tmp10_ = self->priv->device;
#line 111 "/home/artem/Documents/ElementaryProjects/Compose/src/backend/alsa/AlsaAudioInterfaceImpl.vala"
	_tmp11_ = self->priv->hardwareParams;
#line 111 "/home/artem/Documents/ElementaryProjects/Compose/src/backend/alsa/AlsaAudioInterfaceImpl.vala"
	errorCode = snd_pcm_hw_params_set_format (_tmp10_, _tmp11_, SND_PCM_FORMAT_S16_LE);
#line 112 "/home/artem/Documents/ElementaryProjects/Compose/src/backend/alsa/AlsaAudioInterfaceImpl.vala"
	_tmp12_ = errorCode;
#line 112 "/home/artem/Documents/ElementaryProjects/Compose/src/backend/alsa/AlsaAudioInterfaceImpl.vala"
	if (_tmp12_ < 0) {
#line 575 "AlsaAudioInterfaceImpl.c"
		FILE* _tmp13_;
#line 113 "/home/artem/Documents/ElementaryProjects/Compose/src/backend/alsa/AlsaAudioInterfaceImpl.vala"
		_tmp13_ = stdout;
#line 113 "/home/artem/Documents/ElementaryProjects/Compose/src/backend/alsa/AlsaAudioInterfaceImpl.vala"
		fprintf (_tmp13_, "Failed to set format for the device\n");
#line 114 "/home/artem/Documents/ElementaryProjects/Compose/src/backend/alsa/AlsaAudioInterfaceImpl.vala"
		result = FALSE;
#line 114 "/home/artem/Documents/ElementaryProjects/Compose/src/backend/alsa/AlsaAudioInterfaceImpl.vala"
		return result;
#line 585 "AlsaAudioInterfaceImpl.c"
	}
#line 117 "/home/artem/Documents/ElementaryProjects/Compose/src/backend/alsa/AlsaAudioInterfaceImpl.vala"
	rate = 44100;
#line 119 "/home/artem/Documents/ElementaryProjects/Compose/src/backend/alsa/AlsaAudioInterfaceImpl.vala"
	_tmp14_ = stdout;
#line 119 "/home/artem/Documents/ElementaryProjects/Compose/src/backend/alsa/AlsaAudioInterfaceImpl.vala"
	fprintf (_tmp14_, "Set sample rate to 44.1kHz\n");
#line 120 "/home/artem/Documents/ElementaryProjects/Compose/src/backend/alsa/AlsaAudioInterfaceImpl.vala"
	_tmp15_ = self->priv->device;
#line 120 "/home/artem/Documents/ElementaryProjects/Compose/src/backend/alsa/AlsaAudioInterfaceImpl.vala"
	_tmp16_ = self->priv->hardwareParams;
#line 120 "/home/artem/Documents/ElementaryProjects/Compose/src/backend/alsa/AlsaAudioInterfaceImpl.vala"
	_tmp17_ = snd_pcm_hw_params_set_rate_near (_tmp15_, _tmp16_, &rate, 0);
#line 120 "/home/artem/Documents/ElementaryProjects/Compose/src/backend/alsa/AlsaAudioInterfaceImpl.vala"
	errorCode = _tmp17_;
#line 121 "/home/artem/Documents/ElementaryProjects/Compose/src/backend/alsa/AlsaAudioInterfaceImpl.vala"
	_tmp18_ = errorCode;
#line 121 "/home/artem/Documents/ElementaryProjects/Compose/src/backend/alsa/AlsaAudioInterfaceImpl.vala"
	if (_tmp18_ < 0) {
#line 605 "AlsaAudioInterfaceImpl.c"
		FILE* _tmp19_;
#line 122 "/home/artem/Documents/ElementaryProjects/Compose/src/backend/alsa/AlsaAudioInterfaceImpl.vala"
		_tmp19_ = stdout;
#line 122 "/home/artem/Documents/ElementaryProjects/Compose/src/backend/alsa/AlsaAudioInterfaceImpl.vala"
		fprintf (_tmp19_, "Failed to set sample rate");
#line 123 "/home/artem/Documents/ElementaryProjects/Compose/src/backend/alsa/AlsaAudioInterfaceImpl.vala"
		result = FALSE;
#line 123 "/home/artem/Documents/ElementaryProjects/Compose/src/backend/alsa/AlsaAudioInterfaceImpl.vala"
		return result;
#line 615 "AlsaAudioInterfaceImpl.c"
	}
#line 126 "/home/artem/Documents/ElementaryProjects/Compose/src/backend/alsa/AlsaAudioInterfaceImpl.vala"
	_tmp20_ = stdout;
#line 126 "/home/artem/Documents/ElementaryProjects/Compose/src/backend/alsa/AlsaAudioInterfaceImpl.vala"
	fprintf (_tmp20_, "Set up 2 channels\n");
#line 127 "/home/artem/Documents/ElementaryProjects/Compose/src/backend/alsa/AlsaAudioInterfaceImpl.vala"
	_tmp21_ = self->priv->device;
#line 127 "/home/artem/Documents/ElementaryProjects/Compose/src/backend/alsa/AlsaAudioInterfaceImpl.vala"
	_tmp22_ = self->priv->hardwareParams;
#line 127 "/home/artem/Documents/ElementaryProjects/Compose/src/backend/alsa/AlsaAudioInterfaceImpl.vala"
	errorCode = snd_pcm_hw_params_set_channels (_tmp21_, _tmp22_, (guint) 2);
#line 128 "/home/artem/Documents/ElementaryProjects/Compose/src/backend/alsa/AlsaAudioInterfaceImpl.vala"
	_tmp23_ = errorCode;
#line 128 "/home/artem/Documents/ElementaryProjects/Compose/src/backend/alsa/AlsaAudioInterfaceImpl.vala"
	if (_tmp23_ < 0) {
#line 631 "AlsaAudioInterfaceImpl.c"
		FILE* _tmp24_;
#line 129 "/home/artem/Documents/ElementaryProjects/Compose/src/backend/alsa/AlsaAudioInterfaceImpl.vala"
		_tmp24_ = stdout;
#line 129 "/home/artem/Documents/ElementaryProjects/Compose/src/backend/alsa/AlsaAudioInterfaceImpl.vala"
		fprintf (_tmp24_, "Failed to set channels");
#line 130 "/home/artem/Documents/ElementaryProjects/Compose/src/backend/alsa/AlsaAudioInterfaceImpl.vala"
		result = FALSE;
#line 130 "/home/artem/Documents/ElementaryProjects/Compose/src/backend/alsa/AlsaAudioInterfaceImpl.vala"
		return result;
#line 641 "AlsaAudioInterfaceImpl.c"
	}
#line 133 "/home/artem/Documents/ElementaryProjects/Compose/src/backend/alsa/AlsaAudioInterfaceImpl.vala"
	_tmp25_ = self->priv->device;
#line 133 "/home/artem/Documents/ElementaryProjects/Compose/src/backend/alsa/AlsaAudioInterfaceImpl.vala"
	_tmp26_ = self->priv->hardwareParams;
#line 133 "/home/artem/Documents/ElementaryProjects/Compose/src/backend/alsa/AlsaAudioInterfaceImpl.vala"
	errorCode = snd_pcm_hw_params (_tmp25_, _tmp26_);
#line 134 "/home/artem/Documents/ElementaryProjects/Compose/src/backend/alsa/AlsaAudioInterfaceImpl.vala"
	_tmp27_ = errorCode;
#line 134 "/home/artem/Documents/ElementaryProjects/Compose/src/backend/alsa/AlsaAudioInterfaceImpl.vala"
	if (_tmp27_ < 0) {
#line 653 "AlsaAudioInterfaceImpl.c"
		FILE* _tmp28_;
#line 135 "/home/artem/Documents/ElementaryProjects/Compose/src/backend/alsa/AlsaAudioInterfaceImpl.vala"
		_tmp28_ = stdout;
#line 135 "/home/artem/Documents/ElementaryProjects/Compose/src/backend/alsa/AlsaAudioInterfaceImpl.vala"
		fprintf (_tmp28_, "Setting params failed");
#line 136 "/home/artem/Documents/ElementaryProjects/Compose/src/backend/alsa/AlsaAudioInterfaceImpl.vala"
		result = FALSE;
#line 136 "/home/artem/Documents/ElementaryProjects/Compose/src/backend/alsa/AlsaAudioInterfaceImpl.vala"
		return result;
#line 663 "AlsaAudioInterfaceImpl.c"
	}
#line 139 "/home/artem/Documents/ElementaryProjects/Compose/src/backend/alsa/AlsaAudioInterfaceImpl.vala"
	result = TRUE;
#line 139 "/home/artem/Documents/ElementaryProjects/Compose/src/backend/alsa/AlsaAudioInterfaceImpl.vala"
	return result;
#line 669 "AlsaAudioInterfaceImpl.c"
}


static gpointer
_alsa_audio_interface_impl_audio_func_gthread_func (gpointer self)
{
	gpointer result;
	result = (gpointer) ((gintptr) alsa_audio_interface_impl_audio_func ((AlsaAudioInterfaceImpl*) self));
#line 143 "/home/artem/Documents/ElementaryProjects/Compose/src/backend/alsa/AlsaAudioInterfaceImpl.vala"
	g_object_unref (self);
#line 143 "/home/artem/Documents/ElementaryProjects/Compose/src/backend/alsa/AlsaAudioInterfaceImpl.vala"
	return result;
#line 682 "AlsaAudioInterfaceImpl.c"
}


static void
alsa_audio_interface_impl_start_audio_thread (AlsaAudioInterfaceImpl* self)
{
	GError* _inner_error0_ = NULL;
#line 142 "/home/artem/Documents/ElementaryProjects/Compose/src/backend/alsa/AlsaAudioInterfaceImpl.vala"
	g_return_if_fail (self != NULL);
#line 143 "/home/artem/Documents/ElementaryProjects/Compose/src/backend/alsa/AlsaAudioInterfaceImpl.vala"
	g_thread_create (_alsa_audio_interface_impl_audio_func_gthread_func, g_object_ref (self), FALSE, &_inner_error0_);
#line 143 "/home/artem/Documents/ElementaryProjects/Compose/src/backend/alsa/AlsaAudioInterfaceImpl.vala"
	if (G_UNLIKELY (_inner_error0_ != NULL)) {
#line 143 "/home/artem/Documents/ElementaryProjects/Compose/src/backend/alsa/AlsaAudioInterfaceImpl.vala"
		g_critical ("file %s: line %d: uncaught error: %s (%s, %d)", __FILE__, __LINE__, _inner_error0_->message, g_quark_to_string (_inner_error0_->domain), _inner_error0_->code);
#line 143 "/home/artem/Documents/ElementaryProjects/Compose/src/backend/alsa/AlsaAudioInterfaceImpl.vala"
		g_clear_error (&_inner_error0_);
#line 143 "/home/artem/Documents/ElementaryProjects/Compose/src/backend/alsa/AlsaAudioInterfaceImpl.vala"
		return;
#line 702 "AlsaAudioInterfaceImpl.c"
	}
}


static gint
alsa_audio_interface_impl_audio_func (AlsaAudioInterfaceImpl* self)
{
	gint result = 0;
	gint errorCode = 0;
	snd_pcm_sframes_t framesToDeliver = {0};
#line 146 "/home/artem/Documents/ElementaryProjects/Compose/src/backend/alsa/AlsaAudioInterfaceImpl.vala"
	g_return_val_if_fail (self != NULL, 0);
#line 150 "/home/artem/Documents/ElementaryProjects/Compose/src/backend/alsa/AlsaAudioInterfaceImpl.vala"
	while (TRUE) {
#line 717 "AlsaAudioInterfaceImpl.c"
		snd_pcm_t* _tmp0_;
		gint _tmp1_;
		snd_pcm_t* _tmp3_;
		snd_pcm_sframes_t _tmp4_;
		snd_pcm_sframes_t _tmp8_ = {0};
		snd_pcm_sframes_t _tmp9_;
		snd_pcm_sframes_t _tmp11_;
		snd_pcm_sframes_t _tmp12_;
#line 155 "/home/artem/Documents/ElementaryProjects/Compose/src/backend/alsa/AlsaAudioInterfaceImpl.vala"
		_tmp0_ = self->priv->device;
#line 155 "/home/artem/Documents/ElementaryProjects/Compose/src/backend/alsa/AlsaAudioInterfaceImpl.vala"
		errorCode = snd_pcm_wait (_tmp0_, 1000);
#line 156 "/home/artem/Documents/ElementaryProjects/Compose/src/backend/alsa/AlsaAudioInterfaceImpl.vala"
		_tmp1_ = errorCode;
#line 156 "/home/artem/Documents/ElementaryProjects/Compose/src/backend/alsa/AlsaAudioInterfaceImpl.vala"
		if (_tmp1_ < 0) {
#line 734 "AlsaAudioInterfaceImpl.c"
			FILE* _tmp2_;
#line 157 "/home/artem/Documents/ElementaryProjects/Compose/src/backend/alsa/AlsaAudioInterfaceImpl.vala"
			_tmp2_ = stdout;
#line 157 "/home/artem/Documents/ElementaryProjects/Compose/src/backend/alsa/AlsaAudioInterfaceImpl.vala"
			fprintf (_tmp2_, "audio thread error\n");
#line 158 "/home/artem/Documents/ElementaryProjects/Compose/src/backend/alsa/AlsaAudioInterfaceImpl.vala"
			result = 1;
#line 158 "/home/artem/Documents/ElementaryProjects/Compose/src/backend/alsa/AlsaAudioInterfaceImpl.vala"
			return result;
#line 744 "AlsaAudioInterfaceImpl.c"
		}
#line 162 "/home/artem/Documents/ElementaryProjects/Compose/src/backend/alsa/AlsaAudioInterfaceImpl.vala"
		_tmp3_ = self->priv->device;
#line 162 "/home/artem/Documents/ElementaryProjects/Compose/src/backend/alsa/AlsaAudioInterfaceImpl.vala"
		framesToDeliver = snd_pcm_avail_update (_tmp3_);
#line 163 "/home/artem/Documents/ElementaryProjects/Compose/src/backend/alsa/AlsaAudioInterfaceImpl.vala"
		_tmp4_ = framesToDeliver;
#line 163 "/home/artem/Documents/ElementaryProjects/Compose/src/backend/alsa/AlsaAudioInterfaceImpl.vala"
		if (_tmp4_ < ((snd_pcm_sframes_t) 0)) {
#line 754 "AlsaAudioInterfaceImpl.c"
			snd_pcm_sframes_t _tmp5_;
#line 164 "/home/artem/Documents/ElementaryProjects/Compose/src/backend/alsa/AlsaAudioInterfaceImpl.vala"
			_tmp5_ = framesToDeliver;
#line 164 "/home/artem/Documents/ElementaryProjects/Compose/src/backend/alsa/AlsaAudioInterfaceImpl.vala"
			if (_tmp5_ == ((snd_pcm_sframes_t) (-EPIPE))) {
#line 760 "AlsaAudioInterfaceImpl.c"
				FILE* _tmp6_;
#line 165 "/home/artem/Documents/ElementaryProjects/Compose/src/backend/alsa/AlsaAudioInterfaceImpl.vala"
				_tmp6_ = stdout;
#line 165 "/home/artem/Documents/ElementaryProjects/Compose/src/backend/alsa/AlsaAudioInterfaceImpl.vala"
				fprintf (_tmp6_, "an xrun occured\n");
#line 166 "/home/artem/Documents/ElementaryProjects/Compose/src/backend/alsa/AlsaAudioInterfaceImpl.vala"
				break;
#line 768 "AlsaAudioInterfaceImpl.c"
			} else {
				FILE* _tmp7_;
#line 168 "/home/artem/Documents/ElementaryProjects/Compose/src/backend/alsa/AlsaAudioInterfaceImpl.vala"
				_tmp7_ = stdout;
#line 168 "/home/artem/Documents/ElementaryProjects/Compose/src/backend/alsa/AlsaAudioInterfaceImpl.vala"
				fprintf (_tmp7_, "Unknown alsa update count");
#line 169 "/home/artem/Documents/ElementaryProjects/Compose/src/backend/alsa/AlsaAudioInterfaceImpl.vala"
				break;
#line 777 "AlsaAudioInterfaceImpl.c"
			}
		}
#line 173 "/home/artem/Documents/ElementaryProjects/Compose/src/backend/alsa/AlsaAudioInterfaceImpl.vala"
		_tmp9_ = framesToDeliver;
#line 173 "/home/artem/Documents/ElementaryProjects/Compose/src/backend/alsa/AlsaAudioInterfaceImpl.vala"
		if (_tmp9_ > ((snd_pcm_sframes_t) 4096)) {
#line 173 "/home/artem/Documents/ElementaryProjects/Compose/src/backend/alsa/AlsaAudioInterfaceImpl.vala"
			_tmp8_ = (snd_pcm_sframes_t) 4096;
#line 786 "AlsaAudioInterfaceImpl.c"
		} else {
			snd_pcm_sframes_t _tmp10_;
#line 173 "/home/artem/Documents/ElementaryProjects/Compose/src/backend/alsa/AlsaAudioInterfaceImpl.vala"
			_tmp10_ = framesToDeliver;
#line 173 "/home/artem/Documents/ElementaryProjects/Compose/src/backend/alsa/AlsaAudioInterfaceImpl.vala"
			_tmp8_ = _tmp10_;
#line 793 "AlsaAudioInterfaceImpl.c"
		}
#line 173 "/home/artem/Documents/ElementaryProjects/Compose/src/backend/alsa/AlsaAudioInterfaceImpl.vala"
		framesToDeliver = _tmp8_;
#line 175 "/home/artem/Documents/ElementaryProjects/Compose/src/backend/alsa/AlsaAudioInterfaceImpl.vala"
		_tmp11_ = framesToDeliver;
#line 175 "/home/artem/Documents/ElementaryProjects/Compose/src/backend/alsa/AlsaAudioInterfaceImpl.vala"
		_tmp12_ = framesToDeliver;
#line 175 "/home/artem/Documents/ElementaryProjects/Compose/src/backend/alsa/AlsaAudioInterfaceImpl.vala"
		if (alsa_audio_interface_impl_playback_callback (self, (snd_pcm_uframes_t) _tmp11_) != _tmp12_) {
#line 803 "AlsaAudioInterfaceImpl.c"
			FILE* _tmp13_;
#line 176 "/home/artem/Documents/ElementaryProjects/Compose/src/backend/alsa/AlsaAudioInterfaceImpl.vala"
			_tmp13_ = stderr;
#line 176 "/home/artem/Documents/ElementaryProjects/Compose/src/backend/alsa/AlsaAudioInterfaceImpl.vala"
			fprintf (_tmp13_, "playback callback failed\n");
#line 177 "/home/artem/Documents/ElementaryProjects/Compose/src/backend/alsa/AlsaAudioInterfaceImpl.vala"
			break;
#line 811 "AlsaAudioInterfaceImpl.c"
		}
	}
#line 181 "/home/artem/Documents/ElementaryProjects/Compose/src/backend/alsa/AlsaAudioInterfaceImpl.vala"
	result = 0;
#line 181 "/home/artem/Documents/ElementaryProjects/Compose/src/backend/alsa/AlsaAudioInterfaceImpl.vala"
	return result;
#line 818 "AlsaAudioInterfaceImpl.c"
}


static snd_pcm_sframes_t
alsa_audio_interface_impl_playback_callback (AlsaAudioInterfaceImpl* self,
                                             snd_pcm_uframes_t frameCount)
{
	snd_pcm_sframes_t result = {0};
	snd_pcm_sframes_t framesWriten = {0};
	FILE* _tmp0_;
	snd_pcm_t* _tmp1_;
	snd_pcm_sframes_t _tmp2_;
#line 187 "/home/artem/Documents/ElementaryProjects/Compose/src/backend/alsa/AlsaAudioInterfaceImpl.vala"
	_tmp0_ = stdout;
#line 187 "/home/artem/Documents/ElementaryProjects/Compose/src/backend/alsa/AlsaAudioInterfaceImpl.vala"
	fprintf (_tmp0_, "playback called with frames\n");
#line 190 "/home/artem/Documents/ElementaryProjects/Compose/src/backend/alsa/AlsaAudioInterfaceImpl.vala"
	_tmp1_ = self->priv->device;
#line 190 "/home/artem/Documents/ElementaryProjects/Compose/src/backend/alsa/AlsaAudioInterfaceImpl.vala"
	framesWriten = snd_pcm_writei (_tmp1_, self->priv->buf, frameCount);
#line 191 "/home/artem/Documents/ElementaryProjects/Compose/src/backend/alsa/AlsaAudioInterfaceImpl.vala"
	_tmp2_ = framesWriten;
#line 191 "/home/artem/Documents/ElementaryProjects/Compose/src/backend/alsa/AlsaAudioInterfaceImpl.vala"
	if (_tmp2_ < ((snd_pcm_sframes_t) 0)) {
#line 843 "AlsaAudioInterfaceImpl.c"
		FILE* _tmp3_;
#line 192 "/home/artem/Documents/ElementaryProjects/Compose/src/backend/alsa/AlsaAudioInterfaceImpl.vala"
		_tmp3_ = stderr;
#line 192 "/home/artem/Documents/ElementaryProjects/Compose/src/backend/alsa/AlsaAudioInterfaceImpl.vala"
		fprintf (_tmp3_, "write failed");
#line 849 "AlsaAudioInterfaceImpl.c"
	}
#line 195 "/home/artem/Documents/ElementaryProjects/Compose/src/backend/alsa/AlsaAudioInterfaceImpl.vala"
	result = framesWriten;
#line 195 "/home/artem/Documents/ElementaryProjects/Compose/src/backend/alsa/AlsaAudioInterfaceImpl.vala"
	return result;
#line 855 "AlsaAudioInterfaceImpl.c"
}


static void
alsa_audio_interface_impl_real_play (AudioInterface* base,
                                     AudioData* clip,
                                     gboolean looped)
{
	AlsaAudioInterfaceImpl * self;
#line 198 "/home/artem/Documents/ElementaryProjects/Compose/src/backend/alsa/AlsaAudioInterfaceImpl.vala"
	self = (AlsaAudioInterfaceImpl*) base;
#line 198 "/home/artem/Documents/ElementaryProjects/Compose/src/backend/alsa/AlsaAudioInterfaceImpl.vala"
	g_return_if_fail (clip != NULL);
#line 869 "AlsaAudioInterfaceImpl.c"
}


static void
alsa_audio_interface_impl_real_stop (AudioInterface* base,
                                     AudioData* clip)
{
	AlsaAudioInterfaceImpl * self;
#line 202 "/home/artem/Documents/ElementaryProjects/Compose/src/backend/alsa/AlsaAudioInterfaceImpl.vala"
	self = (AlsaAudioInterfaceImpl*) base;
#line 202 "/home/artem/Documents/ElementaryProjects/Compose/src/backend/alsa/AlsaAudioInterfaceImpl.vala"
	g_return_if_fail (clip != NULL);
#line 882 "AlsaAudioInterfaceImpl.c"
}


static void
alsa_audio_interface_impl_real_record (AudioInterface* base)
{
	AlsaAudioInterfaceImpl * self;
#line 206 "/home/artem/Documents/ElementaryProjects/Compose/src/backend/alsa/AlsaAudioInterfaceImpl.vala"
	self = (AlsaAudioInterfaceImpl*) base;
#line 892 "AlsaAudioInterfaceImpl.c"
}


static void
alsa_audio_interface_impl_real_close (AudioInterface* base)
{
	AlsaAudioInterfaceImpl * self;
	snd_pcm_t* _tmp0_;
#line 210 "/home/artem/Documents/ElementaryProjects/Compose/src/backend/alsa/AlsaAudioInterfaceImpl.vala"
	self = (AlsaAudioInterfaceImpl*) base;
#line 211 "/home/artem/Documents/ElementaryProjects/Compose/src/backend/alsa/AlsaAudioInterfaceImpl.vala"
	_tmp0_ = self->priv->device;
#line 211 "/home/artem/Documents/ElementaryProjects/Compose/src/backend/alsa/AlsaAudioInterfaceImpl.vala"
	snd_pcm_close (_tmp0_);
#line 907 "AlsaAudioInterfaceImpl.c"
}


static AudioData*
alsa_audio_interface_impl_real_stop_record (AudioInterface* base)
{
	AlsaAudioInterfaceImpl * self;
	AudioData* result = NULL;
	AudioData* _tmp0_;
#line 214 "/home/artem/Documents/ElementaryProjects/Compose/src/backend/alsa/AlsaAudioInterfaceImpl.vala"
	self = (AlsaAudioInterfaceImpl*) base;
#line 215 "/home/artem/Documents/ElementaryProjects/Compose/src/backend/alsa/AlsaAudioInterfaceImpl.vala"
	_tmp0_ = audio_data_new ();
#line 215 "/home/artem/Documents/ElementaryProjects/Compose/src/backend/alsa/AlsaAudioInterfaceImpl.vala"
	result = _tmp0_;
#line 215 "/home/artem/Documents/ElementaryProjects/Compose/src/backend/alsa/AlsaAudioInterfaceImpl.vala"
	return result;
#line 925 "AlsaAudioInterfaceImpl.c"
}


AlsaAudioInterfaceImpl*
alsa_audio_interface_impl_construct (GType object_type)
{
	AlsaAudioInterfaceImpl * self = NULL;
#line 3 "/home/artem/Documents/ElementaryProjects/Compose/src/backend/alsa/AlsaAudioInterfaceImpl.vala"
	self = (AlsaAudioInterfaceImpl*) g_object_new (object_type, NULL);
#line 3 "/home/artem/Documents/ElementaryProjects/Compose/src/backend/alsa/AlsaAudioInterfaceImpl.vala"
	return self;
#line 937 "AlsaAudioInterfaceImpl.c"
}


AlsaAudioInterfaceImpl*
alsa_audio_interface_impl_new (void)
{
#line 3 "/home/artem/Documents/ElementaryProjects/Compose/src/backend/alsa/AlsaAudioInterfaceImpl.vala"
	return alsa_audio_interface_impl_construct (TYPE_ALSA_AUDIO_INTERFACE_IMPL);
#line 946 "AlsaAudioInterfaceImpl.c"
}


static void
alsa_audio_interface_impl_class_init (AlsaAudioInterfaceImplClass * klass)
{
#line 3 "/home/artem/Documents/ElementaryProjects/Compose/src/backend/alsa/AlsaAudioInterfaceImpl.vala"
	alsa_audio_interface_impl_parent_class = g_type_class_peek_parent (klass);
#line 3 "/home/artem/Documents/ElementaryProjects/Compose/src/backend/alsa/AlsaAudioInterfaceImpl.vala"
	g_type_class_add_private (klass, sizeof (AlsaAudioInterfaceImplPrivate));
#line 3 "/home/artem/Documents/ElementaryProjects/Compose/src/backend/alsa/AlsaAudioInterfaceImpl.vala"
	G_OBJECT_CLASS (klass)->finalize = alsa_audio_interface_impl_finalize;
#line 959 "AlsaAudioInterfaceImpl.c"
}


static void
alsa_audio_interface_impl_audio_interface_interface_init (AudioInterfaceIface * iface)
{
#line 3 "/home/artem/Documents/ElementaryProjects/Compose/src/backend/alsa/AlsaAudioInterfaceImpl.vala"
	alsa_audio_interface_impl_audio_interface_parent_iface = g_type_interface_peek_parent (iface);
#line 3 "/home/artem/Documents/ElementaryProjects/Compose/src/backend/alsa/AlsaAudioInterfaceImpl.vala"
	iface->init = (gint (*) (AudioInterface*)) alsa_audio_interface_impl_real_init;
#line 3 "/home/artem/Documents/ElementaryProjects/Compose/src/backend/alsa/AlsaAudioInterfaceImpl.vala"
	iface->play = (void (*) (AudioInterface*, AudioData*, gboolean)) alsa_audio_interface_impl_real_play;
#line 3 "/home/artem/Documents/ElementaryProjects/Compose/src/backend/alsa/AlsaAudioInterfaceImpl.vala"
	iface->stop = (void (*) (AudioInterface*, AudioData*)) alsa_audio_interface_impl_real_stop;
#line 3 "/home/artem/Documents/ElementaryProjects/Compose/src/backend/alsa/AlsaAudioInterfaceImpl.vala"
	iface->record = (void (*) (AudioInterface*)) alsa_audio_interface_impl_real_record;
#line 3 "/home/artem/Documents/ElementaryProjects/Compose/src/backend/alsa/AlsaAudioInterfaceImpl.vala"
	iface->close = (void (*) (AudioInterface*)) alsa_audio_interface_impl_real_close;
#line 3 "/home/artem/Documents/ElementaryProjects/Compose/src/backend/alsa/AlsaAudioInterfaceImpl.vala"
	iface->stop_record = (AudioData* (*) (AudioInterface*)) alsa_audio_interface_impl_real_stop_record;
#line 980 "AlsaAudioInterfaceImpl.c"
}


static void
alsa_audio_interface_impl_instance_init (AlsaAudioInterfaceImpl * self)
{
#line 3 "/home/artem/Documents/ElementaryProjects/Compose/src/backend/alsa/AlsaAudioInterfaceImpl.vala"
	self->priv = ALSA_AUDIO_INTERFACE_IMPL_GET_PRIVATE (self);
#line 989 "AlsaAudioInterfaceImpl.c"
}


static void
alsa_audio_interface_impl_finalize (GObject * obj)
{
	AlsaAudioInterfaceImpl * self;
#line 3 "/home/artem/Documents/ElementaryProjects/Compose/src/backend/alsa/AlsaAudioInterfaceImpl.vala"
	self = G_TYPE_CHECK_INSTANCE_CAST (obj, TYPE_ALSA_AUDIO_INTERFACE_IMPL, AlsaAudioInterfaceImpl);
#line 5 "/home/artem/Documents/ElementaryProjects/Compose/src/backend/alsa/AlsaAudioInterfaceImpl.vala"
	_0 (self->priv->device);
#line 3 "/home/artem/Documents/ElementaryProjects/Compose/src/backend/alsa/AlsaAudioInterfaceImpl.vala"
	G_OBJECT_CLASS (alsa_audio_interface_impl_parent_class)->finalize (obj);
#line 1003 "AlsaAudioInterfaceImpl.c"
}


GType
alsa_audio_interface_impl_get_type (void)
{
	static volatile gsize alsa_audio_interface_impl_type_id__volatile = 0;
	if (g_once_init_enter (&alsa_audio_interface_impl_type_id__volatile)) {
		static const GTypeInfo g_define_type_info = { sizeof (AlsaAudioInterfaceImplClass), (GBaseInitFunc) NULL, (GBaseFinalizeFunc) NULL, (GClassInitFunc) alsa_audio_interface_impl_class_init, (GClassFinalizeFunc) NULL, NULL, sizeof (AlsaAudioInterfaceImpl), 0, (GInstanceInitFunc) alsa_audio_interface_impl_instance_init, NULL };
		static const GInterfaceInfo audio_interface_info = { (GInterfaceInitFunc) alsa_audio_interface_impl_audio_interface_interface_init, (GInterfaceFinalizeFunc) NULL, NULL};
		GType alsa_audio_interface_impl_type_id;
		alsa_audio_interface_impl_type_id = g_type_register_static (G_TYPE_OBJECT, "AlsaAudioInterfaceImpl", &g_define_type_info, 0);
		g_type_add_interface_static (alsa_audio_interface_impl_type_id, TYPE_AUDIO_INTERFACE, &audio_interface_info);
		g_once_init_leave (&alsa_audio_interface_impl_type_id__volatile, alsa_audio_interface_impl_type_id);
	}
	return alsa_audio_interface_impl_type_id__volatile;
}



